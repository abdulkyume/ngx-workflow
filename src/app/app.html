<div class="header">
  <h1>NgxWorkflow Demo</h1>
  <div class="controls">
    <button (click)="addRandomNode()">Add Node</button>
    <button (click)="applyElkLayout()">ELK Layout</button>
    <button (click)="exportJSON()">Export JSON</button>
    <input type="file" accept="application/json" (change)="importJSON($event)" />
    <button (click)="exportPNG()">Export PNG</button>
    <button (click)="exportSVG()">Export SVG</button>
    <button (click)="fitView()">Fit View</button>
    <button (click)="clearFlow()">Clear All</button>
  </div>
</div>

<div class="flow-container">
  <ngx-workflow-diagram class="flow-diagram" [initialNodes]="nodes" [initialEdges]="edges" [initialViewport]="viewport"
    (nodeClick)="onNodeClick($event)" (nodesChange)="onNodesChange($event)" (edgesChange)="onEdgesChange($event)">

    <!-- Node Toolbars for selected nodes -->
    <ngx-workflow-node-toolbar *ngFor="let node of selectedNodes" [nodeId]="node.id" position="top" align="center">
      <button (click)="deleteNode(node.id)" title="Delete Node">ğŸ—‘ï¸</button>
      <button (click)="duplicateNode(node.id)" title="Duplicate Node">ğŸ“‹</button>
      <button (click)="editNodeLabel(node.id)" title="Edit Properties">âœï¸</button>
    </ngx-workflow-node-toolbar>

  </ngx-workflow-diagram>
</div>

<div class="footer">
  <p>Nodes: {{ nodesCount }} | Edges: {{ edgesCount }} | Zoom: {{ viewport.zoom | number:'1.1-2' }}</p>
</div>