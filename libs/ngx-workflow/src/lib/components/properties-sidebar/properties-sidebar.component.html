<div class="ngx-workflow__sidebar" [class.open]="!!node">
    <div class="ngx-workflow__sidebar-header">
        <h3>Node Properties</h3>
        <button class="ngx-workflow__close-btn" (click)="close.emit()">Ã—</button>
    </div>

    <div class="ngx-workflow__sidebar-content" *ngIf="node">
        <div class="ngx-workflow__form-group">
            <label>ID</label>
            <input type="text" [value]="node.id" disabled class="ngx-workflow__input disabled">
        </div>

        <div class="ngx-workflow__form-group">
            <label>Label</label>
            <input type="text" [ngModel]="node.label" (ngModelChange)="updateLabel($event)" class="ngx-workflow__input">
        </div>

        <div class="ngx-workflow__form-group">
            <label>Shape</label>
            <select [ngModel]="node.type === 'shape' ? (node.data?.type || 'rectangle') : 'default'"
                (ngModelChange)="updateShapeType($event)" class="ngx-workflow__input">
                <option *ngFor="let s of shapes" [value]="s">{{ s | titlecase }}</option>
            </select>
        </div>

        <div class="ngx-workflow__form-group">
            <label>Ports</label>
            <select [ngModel]="node.ports || 4" (ngModelChange)="updatePorts($event)" class="ngx-workflow__input">
                <option [value]="1">1 - Top</option>
                <option [value]="2">2 - Top, Bottom</option>
                <option [value]="3">3 - Left, Right</option>
                <option [value]="4">4 - All</option>
            </select>
        </div>

        <div class="ngx-workflow__form-group">
            <label>Background Color</label>
            <input type="color" [ngModel]="node.style?.['backgroundColor'] || '#ffffff'"
                (ngModelChange)="updateBackgroundColor($event)" class="ngx-workflow__input"
                style="height: 40px; padding: 2px;">
        </div>

        <div class="ngx-workflow__form-group">
            <label>Text Color</label>
            <input type="color" [ngModel]="node.style?.['color'] || '#000000'"
                (ngModelChange)="updateLabelColor($event)" class="ngx-workflow__input"
                style="height: 40px; padding: 2px;">
        </div>

        <div class="ngx-workflow__form-row">
            <div class="ngx-workflow__form-group">
                <label>X</label>
                <input type="number" [ngModel]="node.position.x" (ngModelChange)="updateX($event)"
                    class="ngx-workflow__input">
            </div>
            <div class="ngx-workflow__form-group">
                <label>Y</label>
                <input type="number" [ngModel]="node.position.y" (ngModelChange)="updateY($event)"
                    class="ngx-workflow__input">
            </div>
        </div>

        <div class="ngx-workflow__form-row">
            <div class="ngx-workflow__form-group">
                <label>Width</label>
                <input type="number" [ngModel]="node.width || 170" (ngModelChange)="updateWidth($event)"
                    class="ngx-workflow__input">
            </div>
            <div class="ngx-workflow__form-group">
                <label>Height</label>
                <input type="number" [ngModel]="node.height || 60" (ngModelChange)="updateHeight($event)"
                    class="ngx-workflow__input">
            </div>
        </div>
    </div>
</div>